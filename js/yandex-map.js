"use strict";$(function(){var t="yandex-map",a="/local/templates/azbn7theme",e=$("#"+t);if(e.length){var o=e,s={center:[52.883481,36.28951],zoom:8,controls:["smallMapDefaultSet"]},c=function(){var e=new ymaps.Map(t,s,{}),o=$(this),c=(JSON.parse(o.attr("data-contact")||"{}"),ymaps.templateLayoutFactory.createClass('<div class="contacts-panel__location"><svg class="icon-svg icon-map-location" role="img"><use xlink:href="'+a+'/img/svg/sprite.svg#map-location"></use></svg></div>')),n=ymaps.templateLayoutFactory.createClass('<div class="contacts-panel__location is--active"><svg class="icon-svg icon-map-location" role="img"><use xlink:href="'+a+'/img/svg/sprite.svg#map-location"></use></svg></div>'),i=(ymaps.templateLayoutFactory.createClass('<div style="color: #024f85; font-weight: bold;">$[properties.geoObjects.length]</div>'),$(".azbn__contacts__item"));i.length&&(i.each(function(t){var a=$(this);try{var o=JSON.parse(a.attr("data-contact")||{});a.attr("data-map-index",t);var s=new ymaps.Placemark(o.coord,{},{iconLayout:c,iconImageSize:[42,52],iconImageOffset:[-21,-52],clusterCaption:o.title});e.geoObjects.add(s,t)}catch(t){console.dir(t),console.dir(a)}}),$(document.body).on("click.azbn7",".azbn__contacts__item a.azbn7__map-point-link",null,function(t){t.preventDefault();var a=$(this).closest(".azbn__contacts__item"),o=JSON.parse(a.attr("data-contact")||{}),s=parseInt(a.attr("data-map-index"));e.setCenter(o.coord),e.setZoom(15,{smooth:!0}),e.geoObjects.get(s).options.set({iconLayout:n})}))};o.length&&ymaps.ready(c)}});